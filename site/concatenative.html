<!DOCTYPE html><html><head>
<link href="../links/main.css" type="text/css" rel="stylesheet">
<link href="../media/services/icon.png" type="image/png" rel="shortcut icon">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property='og:type' content='website'/>
<meta property='og:site_name' content='XXIIVV'/>
<meta property='og:description' content="By Devine Lu Linvega"/>
<meta property='og:logo' content="https://wiki.xxiivv.com/media/services/rss.jpg"/>
<meta property="og:title" content="concatenative"/><meta property="og:url" content="https://wiki.xxiivv.com/site/concatenative.html"/><meta property="og:image" content="https://wiki.xxiivv.com/media/services/rss.jpg"/><title>XXIIVV &mdash; concatenative</title></head><body>
<header><a href="home.html"><img alt="XXIIVV" src="../media/icon/logo.svg"></a></header>
<nav><ul><li><a href="programming_languages.html" class="parent">programming languages</a></li><li><a href="operating_systems.html">operating systems</a></li><li><a href="graphical_input.html">graphical input</a></li><li><a href="file_formats.html">file formats</a></li><li><a href="data_encoding.html">data encoding</a></li><li><a href="type_systems.html">type systems</a></li><li><a href="versioning.html">versioning</a></li></ul><ul><li><a href="assembly.html">assembly</a></li><li><a href="imperative.html">imperative</a></li><li><a href="concatenative.html" class="self">concatenative</a></li><li><a href="rewriting.html">rewriting</a></li><li><a href="functional.html">functional</a></li><li><a href="neural_nets.html">neural nets</a></li><li><a href="graphical.html">graphical</a></li></ul><ul><li><a href="forth.html">forth</a></li><li><a href="postscript.html">postscript</a></li></ul></nav>
<main><h2>Concatenative languages use juxtaposition of expressions for function composition.</h2>

<img src="../media/refs/chesshire_head.png" width='140' style='float:right;margin-left:30px'>

<p>The point-free programming paradigm is where function definitions do not
identify the arguments on which they operate, all terms denote unary functions applied on a stack or a queue. </p>

<h3>Fizzbuzz, in <a href='uxntal.html'>Uxntal</a>.</h3>
<pre>
#6500
@fizzbuzz ( n i -- )
	#00
	OVR #03 DIVk MUL SUB ?{ INC
		LIT2 "F 18 DEO LIT2 "i 18 DEO LIT2 "z 18 DEOk DEO }
	OVR #05 DIVk MUL SUB ?{ INC
		LIT2 "B 18 DEO LIT2 "u 18 DEO LIT2 "z 18 DEOk DEO }
	?{ 
		DUP #0a DIVk #30 ADD #18 DEO
		DIVk MUL SUB #30 ADD #18 DEO }
	#0a18 DEO
	INC GTHk ?fizzbuzz POP2 BRK
</pre>

<!--
<p>A stack-oriented language, in which whitespace is composition, allows programs
to be interpreted and evaluated faster, since no syntax analysis is required,
only lexical analysis. Lexical analysis is the process of converting a sequence
of characters in a source code file into a sequence of tokens, and syntax
analysis is the validation of these tokens according to the rules of the
programming language. </p>

<img src='../media/refs/rpn.png' width='40' class='nodark' style='float:left;margin-right:15px; margin-top:15px'/>

<p>The <a href='notation.html'>postfix notation</a> is an economic way to express computations
<i>syntactically</i> as it has no precedence rules and the stack-passing
mechanism simplifies the handling of multiple return values.</p>

<h3>Properties of Concatenative Languages</h3>

<ul>
	<li>Concatenative languages are necessarily point-free as allowing terms to
denote variables would violate the rule that all terms denote functions.</li>
	<li>The reduction of any expression is the simplification of one function to
another function; it is never necessary to deal with the application of
functions to objects. This property separates them from the otherwise similar
function-level languages of John Backus, which are <a
href='functional.html'>applicative</a>.</li>
	<li>Any subexpression can be replaced with a name that represents the same
subexpression. This is referred to in the concatenative community as <i>factoring</i>.</li>
	<li>The syntax and semantics of concatenative languages form the algebraic
structure of a monoid.</li>
</ul>

<p>The corollary to the presence of stack operation in the code which have nothing
to do with the problem domain, like <i>pop</i>, <i>swap</i>, and <i>dup</i>;
are the <i>let</i> and label tokens.</p>

<q>Truth be told, the amount of good research into concatenative
languages is nearly non-existent. </q>

<h3>Bestiary</h3>

<table border='1' id='combinators'>
	<tr><th colspan='2'>Single Items</th></tr>
	<tr><th>drop/pop/zap</th><td>( a -- )</td></tr>
	<tr><th>nop</th><td>( a -- a )</td></tr>
	<tr><th>dup</th><td>( a -- a a )</td></tr>
	<tr><th>nip</th><td>( a b -- b )</td></tr>
	<tr><th>swap</th><td>( a b -- b a )</td></tr>
	<tr><th>over/peek</th><td>( a b -- a b a )</td></tr>
	<tr><th>tuck</th><td>( a b -- b a b )</td></tr>
	<tr><th>rot/dig</th><td>( a b c -- b c a )</td></tr>
	<tr><th>-rot/bury</th><td>( a b c -- c a b )</td></tr>
	<tr><th>poke/snatch</th><td>( a b c -- b c )</td></tr>
	<tr><th>flip/spin</th><td>( a b c -- c b a )</td></tr>
	<tr><th>roll</th><td>( a b c d -- b c d a )</td></tr>
	<tr><th>-roll</th><td>( a b c d -- d a b c )</td></tr>
	<tr><th colspan='2'>Quoted Items</th></tr>
	<tr><th>unit</th><td>( a -- [a] )</td></tr>
	<tr><th>identity</th><td>( [a] -- a )</td></tr>
	<tr><th>rep</th><td>( [a] -- a a )</td></tr>
	<tr><th>run</th><td>( [a] -- a [a] )</td></tr>
	<tr><th>cons</th><td>( a [b] -- [a b] )</td></tr>
	<tr><th>sons</th><td>( a [b] -- [a b] a )</td></tr>
	<tr><th>dip</th><td>( a [b] -- b a )</td></tr>
	<tr><th>cat/compose</th><td>( [a] [b] -- [a b] )</td></tr>
	<tr><th>sap</th><td>( [a] [b] -- b a )</td></tr>
	<tr><th>swat/prepose</th><td>( [a] [b] -- [b a] )</td></tr>
	<tr><th>take</th><td>( [a] [b] -- [b [a]] )</td></tr>
	<tr><th>tack</th><td>( [a] [b] -- [a [b]] )</td></tr>
	<tr><th>sip</th><td>( b [a] -- b a b )</td></tr>
	<tr><th>cake</th><td>( a [b] -- [a b] [b a] )</td></tr>
</table>

<p>A generalized stack operator <code>%abc</code>, is sometimes used to represent the transformation, for example, <code>%ba</code> is the same as <code>swap</code>, <code>%aa</code> is the same as <code>dup</code> and <code>%bab</code> is the same as <code>over</code>.</p>

<img src="../media/refs/catlang.png" alt="Catlang icon by CapitalEx" width='70'>

<style>
#combinators tr td:nth-child(2) { font-family:mono }
</style>

--><h2>Forth is a programming language that uses two stacks and a dictionary of words.</h2>

<p>A Forth environment combines the compiler with an interactive shell, where the user defines and runs subroutines called words. Words can be tested, redefined, and debugged as the source is entered without recompiling or restarting the whole program.</p>

<p>Forth programmers enjoy the immediacy of an interpreter while at the same time the performance and efficiency of a compiler. </p>

<figure>
	<img src='../media/refs/vogue.jpg' width='300'/>
	<figcaption>Typical Forth Programmer</figcaption>
</figure>

<p>My principal forth environment is <a href='http://www.call-with-current-continuation.org/uf/uf.html' target='_blank'>Felix Winkelmann's UF</a>, a wonderful little graphical forth environment running on the <a href='uxn.html'>Uxn</a> virtual machine. I also sometimes use a custom version of the <code>lbforth.c</code> REPL, modified to work on <a href='plan9.html'>Plan9(ARM)</a> which can be downloaded <a href='../etc/lbforth9.c.txt' target='_blank'>here</a>.</p>

<h3>Basics</h3>

<p>Forth reads from left to right, spaces are separators, when you wish to quit, type <code>BYE</code>. A stack is a way of managing data. With a stack, data is added to and taken from the "top", as with a stack of dishes. The acronym for this is LIFO: <i>Last In First Out</i>.</p>

<p>To inspect the stack, type <code>.S</code></p>

<pre>
10 20 30 .S
30 20 10 <b>OK</b>
DROP .S
20 10 <b>OK</b>
BYE
</pre>

<p>Forth has no operator precedence, and does not need parentheses.</p>

<table border='1'>
	<tr><th>Reverse Polish</th><th>Infix</th></tr>
	<tr><td>3 4 + 2 *</td><td>(3 + 4) * 2</td></tr>
	<tr><td>2 3 4 * +</td><td>(3 * 4) + 2</td></tr>
	<tr><td>2 3 * 4 +</td><td>(2 * 3) + 4</td></tr>
	<tr><td>5 6 + 7 *</td><td>(5 + 6) * 7</td></tr>
</table>

<h3>Words</h3>

<p>The dictionary comes with the Forth system. The programmer writes a program by adding to the dictionary words defined in terms of words in the dictionary. As a rule, Forth finds a word by starting with the most recently defined word and working backwards. If two or more words in the dictionary have the same name, Forth will find the most recently defined and be satisfied. </p>

<p>A colon definition starts with the Forth word <code>:</code></p>

<pre>
: HELLO ." Hi! " ;  
HELLO
Hi!  OK
</pre>

<p>Because in Forth data is passed implicitly, it is considered insane to define a word without documenting what data it takes from the stack and what data it returns to the stack. The canonical way of doing this is to use the Forth word <code>(</code> which tells the system to ignore what follows up to and including the next <code>)</code>. Expectations ("before") and results ("after") are separated by --. The resulting ( before -- after ) is a "stack-effect comment".</p>

<pre>
: SQUARED DUP * ;
5 SQUARED .
25
</pre>

<p>You program in Forth by teaching a machine new actions that you and the machine know by name. Each new action is a novel arrangement of known actions, perhaps mixing in some data. By being added to the dictionary the new action can be used to teach still newer actions.</p>

<pre>
: SQUARED  ( n -- n**2 )  DUP * ;
: CUBED  ( n -- n**3 )  DUP SQUARED * ;
: 4TH  ( n -- n**4 )  SQUARED SQUARED ;
</pre>

<h3>Logic</h3>

<p>Thereâ€™s actually no boolean type in Forth. The number <code>0</code> is treated as false, and any other number is true, although the canonical true value is <code>-1</code> (all boolean operators return <code>0</code> or <code>-1</code>). Conditionals in Forth can only be used inside definitions. </p>

<p>The simplest conditional statement in Forth is <code>if then</code>, which is equivalent to a standard <code>if</code> statement in most languages. Hereâ€™s an example of a definition using <code>if then</code>. In this example, weâ€™re also
using the <code>mod</code> word, which returns the modulo of the top two numbers on the stack. In this case, the top number is 5, and the other is whatever was placed on the stack before calling <code>buzz?</code>. Therefore, <code>5 mod 0 =</code> is a boolean expression that checks to see if the top of the stack is divisible by 5.</p>

<pre>
: BUZZ? 5 MOD 0 = IF ." BUZZ" THEN ;
</pre>

<h3>Loops</h3>

<pre>
: STAR [CHAR] * EMIT ;
: STARS 0 DO STAR LOOP CR ;
10 STARS
**********
</pre>

<h3>Stack Primitives</h3>

<p>Stack machines are arguably the simplest kind architecture. Their LIFO structure is quite suitable for block-oriented languages. The code size for a stack machine can be very compact because most instructions have no operand field.</p>

<ul>
	<li><code>POP</code> Remove an item at index, closing the hole left in the stack.</li>
	<li><code>ROLL</code> Remove an item at index, push it on top of the stack.</li>
	<li><code>PICK</code> Copy an item at index, push it on top of the stack.</li>
</ul>

<p>Given the <i>Last In First Out</i> stack <code>a b c</code>, here are the resulting stacks after each primitive:</p>

<table border='1'>
	<tr><td colspan="2">Primary</td><td colspan="2">Secondary</td><td>Definition</td></tr>
	<tr><th rowspan="2">POP</th><td>0</td><th>DROP</th><td>a b</td><td>Discard top item.</td></tr>
	<tr><td>1</td><th>NIP</th><td>a c</td><td>Discard second item.</td></tr>
	<tr><th rowspan="2">ROLL</th><td>0</td><th>SWAP</th><td>a c b</td><td>Bring second item to top.</td></tr>
	<tr><td>1</td><th>ROT</th><td>b c a</td><td>Bring third item to top.</td></tr>
	<tr><th rowspan="2">PICK</th><td>0</td><th>DUP</th><td>a b c c</td><td>Copy top item.</td></tr>
	<tr><td>1</td><th>OVER</th><td>a b c b</td><td>Copy second item to top.</td></tr>
</table>

<img src="../media/refs/swap.png" alt="Swap operation by Leo Brodie">

<h3 id='minforth'>Minimal Forth Architectures</h3>

<p>In <a href='https://leahneukirchen.org/blog/archive/2020/04/brute-forthing-minimal-programs-for-stack-arrangements.html' target='_blank'>The Road Towards A Minimal Forth Architecture</a>, Mikael Patel builds toward a forth from only a handful of arithmetic and stack primitives. Here is an implementation of some of these primitives in <a href='uxntal_macros.html'>Uxntal macros</a>.</p>

<pre>
%t! ( v -- ) { .t STZ }
%t@ ( -- v ) { .t LDZ }
%r> ( | v -- v ) { STHr }
%>r ( v -- | v ) { STH }
%1+ ( x -- x+1 ) { INC }
%0= ( x -- flag ) { #00 EQU }
%nand ( x y -- z ) { AND #ff EOR }
%exit ( -- ) { BRK }
%minint { #80 }

%drop ( v -- ) { t! }
%dup ( v -- vv ) { t! t@ t@ }
%swap ( ab -- ba ) { t! >r t@ r> }
%nip ( ab -- b ) { >r t! r> }
%over ( ab -- aba ) { >r t! t@ r> t@ }
%tuck ( ab -- bab ) { t! >r t@ r> t@ }
%rot ( abc -- bca ) { >r >r t! r> r> t@ }
%2swap ( abcd -- cdab ) { >r t! >r >r t@ r> r> r> t! >r >r t@ r> r> }
%2dup ( ab -- abab ) { t! t@ t@ >r >r t! t@ r> t@ r> }
%2over ( abcd -- abcdab ) { >r >r 2dup r> r> 2swap }
%2drop ( ab -- ) { t! t! }
%3rev ( abc -- cba ) { t! >r t@ >r t! r> r> t@ }
%4rev ( abcd -- dcba ) { t! >r t@ >r t! r> r> t@ >r >r >r t! r> r> r> t@ }
%third ( abcd -- abca ) { >r >r t! t@ r> r> t@ }
%fourth ( abcd -- abcda ) { >r >r >r t! t@ r> r> r> t@ }
%3dup ( abc -- abcabc ) { third third third }

%not ( a -- b ) { dup nand }
%and ( a b -- c ) { nand not }
%or ( a b -- c ) { not swap not nand }
%xor ( a b -- c ) { over over not nand >r swap not nand r> nand }

%r@ ( | x -- x | x ) { r> r> dup >r swap >r }
%1- ( x -- y ) { not 1+ not }
%2+ ( x -- y ) { 1+ 1+ }
%2- ( x -- y ) { not 2+ not }
%negate ( x -- y ) { not 1+ }
%boolean ( x -- flag ) { 0= 0= }
%0< ( x -- flag ) { minint and boolean }
%0> ( x -- flag ) { dup 0< swap 0= or not }
%sub ( x y -- z ) { negate ADD } ( bypass )
%equal ( x y -- flag ) { sub 0= }
%lesser ( x y -- flag ) { sub 0< }
%greater ( x y -- flag ) { sub 0> }

|000 @t $1
|100
	#06 2-
	#010e DEO
BRK
</pre>

<p>Chuck Moore also uses a pared down Forth for his custom minimal-instruction set processors. They are an inspiration for designing other minimal languages. For example, his latest designs have five-bit instructions, for 32 possible opcodes:</p>

<table border='1'>
	<tr><th>Stack</th><td>DROP, DUP, OVER, PUSH, POP</td></tr>
	<tr><th>Math</th><td>+, AND, XOR, NOT, 2*, 2/, multiply-step</td></tr>
	<tr><th>Call</th><td>JUMP, CALL, RETURN, IF, -IF</td></tr>
	<tr><th>Loop</th><td>NEXT, UNEXT</td></tr>
	<tr><th>Register</th><td>A, A!, B!</td></tr>
	<tr><th>Memory</th><td>@, !, @+, !+, @B, !B, @P, !P</td></tr>
	<tr><th>NO-OP</th><td>.</td></tr>
</table>

<ul>
	<li><a href='http://www.murphywong.net/hello/simple.htm' target='_blank'>Forth Tutorial</a></li>
	<li><a href='https://gist.github.com/lbruder/10007431' target='_blank'>Original lbforth</a></li>
	<li><a href='http://www.ultratechnology.com/method.htm' target='_blank'>Forth Methodology</a></li>
	<li><a href='https://users.ece.cmu.edu/~koopman/stack_computers/appb.html' target='_blank'>Forth Primitives</a></li>
	<li><a href='https://patorjk.com/programming/articles/forththoughts.htm' target='_blank'>Language for Thoughtful Programming</a></li>
	<li><a href='https://colorforth.github.io/HOPL.html' target='_blank'>Forth History</a></li>
	<li><a href='https://www.bradrodriguez.com/papers/moving1.htm' target='_blank'>Design Decisions in the Forth Kernel</a></li>
	<li><a href='https://wiki.forth-ev.de/lib/exe/fetch.php/en:projects:a-start-with-forth:3_instruction_forth.pdf' target='_blank'>3 Instructions Forth</a></li>
	<li><a href='https://plover.com/~mjd/misc/hbaker-archive/ForthStack.html' target='_blank'>Linear Logic and Permutation Stacks</a></li>
	<li><a href='http://ratfactor.com/forth/the_programming_language_that_writes_itself.html' target='_blank'>The Language That Writes Itself</a>, by Ratfactor</li>
	<li><a href='http://www.call-with-current-continuation.org/articles/forth.txt' target='_blank'>Thoughts</a>, by Felix Winkelmann</li>
</ul>

<h2>Postscript is a programming language that was designed to specify the layout of the printed page.</h2>

<p>The Postscript language uses a <a href='notation.html'>postfix</a> syntax similar to <a href='forth.html'>Forth</a>.</p>

<p>Guide written by Paul Bourke, last updated December 1998.<p>

<figure>
	<img src='../media/refs/vogue-postscript.jpg' width='300'/>
	<figcaption>Typical Postscript Programmer</figcaption>
</figure>

<h3>Introduction</h3>

<p>Postscript printers and postscript display
software use an interpreter to convert the page description into the
displayed graphics.</p>

<p>
The following information is designed as a first tutorial to the postscript
language. It will concentrate on how to use postscript to generate graphics
rather than explore it as a programming language.
By the end you should feel confident about writing simple
postscript programs for drawing graphics and text. Further information
and a complete specification of the language can be obtained from
<b>The Postscript Language Reference Manual</b> from Adobe Systems Inc,
published by Addison-Wesley, Reading, Massachuchusetts, 1985.
</p>

<p>
Why learn postscript, after all, many programs can generate it for you
and postscript print drivers can print to a file? Some reasons might
be:
</p>

<ul>
  <li>Having direct postscript output can often result in much more efficient
    postscript, postscript that prints faster than the more generic output
    from printer drivers.</li>
  <li>There are many cases where generating postscript directly can result
    in much better quality. For example when drawing many types of fractals
    where high resolution is necessary, being able to draw at the native
    high resolution of a postscript printer is desirable.</li>
  <li>It isn't uncommon for commercial packages to make errors with their
    postscript output. Being able to look at the postscript and make some
    sense of what is going on can sometimes give insight on how to fix
    the problem.</li>
</ul>

<h3>The Basics</h3>

<p>
Postscript files are (generally) plain text files and as such they can
easily be generated by hand or as the output of user written programs.
As with most programming languages, postscript files (programs) are
intended to be, at least partially, human-readable. As such, they are
generally free format, that is, the text can be split across lines and
indented to highlight the logical structure.<br>
Comments can be inserted anywhere within a postscript file with the percent (%)
symbol, the comment applies from the % until the end of the line.
<br>
While not part of the postscript specification the first line of a
postscript file often starts as %!. This is so that spoolers and other
printing software detect that the file is to interpreted as postscript
instead of a plain text file. The inline example below will not include this
but the postscript files linked from this page will include it since they
are design for direct printing.<br>
The first postscript command to learn is <b>showpage</b>, it forces the
printer to print a page with whatever is currently drawn on it. The examples
given below print on single pages and therefore there is a showpage at the end
of the file in each example, see the comments later regarding EPS.
</p>

<h3>A Path</h3>

<p>
A path is a collection of, possibly disconnected, lines and areas describing
the image. A path is itself not drawn, after it is specified it can be
stroked (lines) or filled (areas) making the appropriate marks on the page.
There is a special type of path called the clipping path, this is a path
within which future drawing is constrained. By default the clipping path is
a rectangle that matches the border of the paper, it will not be changed
during this tutorial.
</p>

<h3>The Stack</h3>

<p>
Postscript uses a stack, otherwise known as a LIFO (Last In First Out)
stack to store programs and data. A postscript interpreter places the
postscript program on the stack and executes it, instructions that
require data will read that data from the stack. For example, there is
an operator in postscript for multiplying two numbers, <b>mul</b>. it
requires two arguments, namely the two numbers that are to be multiplied
together. In postscript this might be specified as
</p>

<pre>
   10 20 mul
</pre>

<p>
The interpreter would place 10 and then 20 onto the stack. The operator
<b>mul</b> would remove 20 and then 10 from the stack,
multiply them together and leave the result, 200, on the stack.</p>

<h3>Coordinate system</h3>

<p>
Postscript uses a coordinate system that is device independent, that is,
it doesn't rely on the resolution, paper size, etc of the final output
device. The initial coordinate system has the x axis to the right and y axis
upwards, the origin is located at the bottom left hand corner of the page.
The units are of "points" which are 1/72 of an inch long. In other words,
if we draw a line from postscript coordinate (72,72) to (144,72) we will
have a line starting one inch in from the left and right of the page,
the line will be horizontal and be one inch long.
</p>

<p>
The coordinate system can be changed, that is, scaled, rotated, and translated.
This is often done to form a more convenient system for the particular
drawing being created.
</p>

<h3>Basic Drawing Commands</h3>

<p>
Time to draw something. The following consists of a number of operators
and data, some operators like <b>newpath</b> don't need arguments, others
like <b>lineto</b> take two arguments from the stack. All the examples
in this text are shown as postscript on the left with the resulting
image on the right. The text on the left also acts as a link to a printable
form of the postscript file.
</p>

<pre>
newpath
100 200 moveto
200 250 lineto
100 300 lineto
2 setlinewidth
stroke
</pre>

<p>
There are also a relative moveto and lineto commands, namely, <b>rmoveto</b>
and <b>rlineto</b>.
</p>

<p>
In this next example a filled object will be drawn in a particular
shade, both for the outline and the interior. Shades range from 0 (black)
to 1 (white). Note the <b>closepath</b> that joins the first vertex of
the path with the last.
</p>

<pre>
newpath
100 200 moveto
200 250 lineto
100 300 lineto
closepath
gsave
0.5 setgray
fill
grestore
4 setlinewidth
0.75 setgray
stroke
</pre>

<p>
The drawing commands such as <b>stroke</b> and <b>fill</b> destroy the
current path, the way around this is to use <b>gsave</b> that saves the
current path so that it can be reinstated with <b>grestore</b>.
</p>

<h3>Text</h3>

<p>
Text is perhaps the most sophisticated and powerful aspect of postscript,
as such only a fraction of its capabilities will be discussed here.
One of the nice things is that the way characters are placed on the
page is no different to any other graphic. The interpreter creates a
path for the character and it is then either stroked or filled as
per usual.
</p>

<pre>
/Times-Roman findfont
12 scalefont
setfont
newpath
100 200 moveto
(Example 3) show
</pre>

<p>
As might be expected the position (100,200) above specifies the position
of the bottom left corner of the text string. The first three lines in the
above example are housekeeping that needs to be done the first time a
font is used. By default the font size is 1 point, scalefont then sets
the font size in units of points (1/72 inch). The brackets around the words
"Example 3" indicate that it is a string.
</p>

<p>
A slightly modified version of the above uses <b>charpath</b> to treat
the characters in the string as a path which can be stroked or filled.
</p>

<pre>
/Times-Roman findfont
32 scalefont
setfont
100 200 translate
45 rotate
2 1 scale
newpath
0 0 moveto
(Example 4) true charpath
0.5 setlinewidth
0.4 setgray
stroke
</pre>

<p>
You should make sure you understand the order of the operators above
and the resulting orientation and scale of the text, procedurally it
draws the text, <b>scale</b> the y axis by a factor of 2, <b>rotate</b> counter
clockwise about the origin, finally <b>translate</b> the coordinate system
to (100,200).
</p>

<h3>Colour</h3>

<p>
For those with colour LaserWriters the main instruction of interest that
replaces the <b>setgray</b> is previous examples is <b>setrgbcolor</b>.
It requires 3 arguments, the red-green-blue components of the colour
each varying from 0 to 1.
</p>

<pre>
newpath
100 100 moveto
0 100 rlineto
100 0 rlineto
0 -100 rlineto
-100 0 rlineto
closepath
gsave
0.5 1 0.5 setrgbcolor
fill
grestore
1 0 0 setrgbcolor
4 setlinewidth
stroke
</pre>

<h3>Programming</h3>

<p>
As mentioned in the introduction postscript is a programming language.
The extend of this language will not be covered here except to show
some examples of procedures that can be useful to simplify postscript
generation and make postscript files smaller.
<br>
Lets assume one needed to draw lots of squares with no border but
filled with a particular colour. One could create the path repeatedly
for each one, alternatively one could define something like the following.
</p>

<pre>
/csquare {
   newpath
   0 0 moveto
   0 1 rlineto
   1 0 rlineto
   0 -1 rlineto
   closepath
   setrgbcolor
   fill
} def

20 20 scale

5 5 translate
1 0 0 csquare

1 0 translate
0 1 0 csquare

1 0 translate
0 0 1 csquare
</pre>

<p>
This procedure
draws three coloured squares next to each other, each 20/72 inches
square, note the <b>scale</b> of 20 on the coordinate system. The procedure
draws a unit square and it expects the RGB colour to be on the stack.
This could be used as a method (albeit inefficient) of drawing a
bitmap image.
</p>

<p>
Even if one is simply drawing lots of lines on the page, in order to reduce
the file size it is common to define a procedure as shown below. It just
defines a single character "l" to draw a line segment, one can then use
commands like 100 200 200 200 l" to draw a line segment from (100,200) to
(200,200).
</p>

<h3>koch.ps</h3>

<pre>
%!PS-Adobe-3.0 EPSF-3.0

/koch {
  dup depth le {     % s < depth
    1 add exch % s => s+1
    3 div exch % t => t/3
    % t/3 s+1 60 t/3 s+1 240 t/3 s+1 60 t/3 s+1
    60 3 copy 180 add 3 copy 180 sub 3 copy pop
    koch rotate koch rotate koch rotate koch
  }
  { pop 0 rlineto }         % draw
  ifelse
} def

4.0 4.0 scale
/depth 5 def
0.1 setlinewidth
newpath
 20 100 moveto
100   1 koch stroke
showpage
</pre><ul>
	<li><a href='https://www.math.ubc.ca/~cass/graphics/manual/' target='_blank'>tutorials</a></li>
</ul>

<ul></ul><p><b>incoming: </b><a href="binary.html">binary</a> <a href="fractran.html">fractran</a> <a href="thuesday.html">thuesday</a> <a href="uxntal.html">uxntal</a> <a href="uxn_devlog.html">uxn devlog</a> <a href="2024.html">2024</a> </p></main>
<footer>
	<a href="uxn.html"><img src="../media/icon/uxn.png" alt="Uxn Powered"/></a> 
	<a href="ethics.html"><img src="../media/icon/3arrows.png" alt="NoNazis!"/></a>
	<a href="devine_lu_linvega.html">Devine Lu Linvega</a> <span> &bull; 2008-2025</span>
	<div class="right"><a href="about.html#license">BY-NC-SA 4.0</a>
		<a href="https://creativecommons.org/licenses/by-nc-sa/4.0" target="_blank"><img src="../media/icon/cc.png" alt="CreativeCommons"/></a>
		<a href="https://webring.xxiivv.com/" target="_blank"><img src="../media/icon/rotonde.png" alt="Webring"/></a>
		<a href="https://merveilles.town/@neauoire" rel="me" target="_blank"><img src="../media/icon/merveilles.png" alt="Merveilles"/></a>
	</div>
	<hr/>
</footer>
</body></html>