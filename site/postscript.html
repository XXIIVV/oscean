<!DOCTYPE html><html><head>
<link href="../links/main.css" type="text/css" rel="stylesheet">
<link href="../media/services/icon.png" type="image/png" rel="shortcut icon">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta property='og:type' content='website' />
<meta property='og:url' content='https://wiki.xxiivv.com/' />
<meta property='og:site_name' content='XXIIVV' />
<meta property='og:description' content="By Devine Lu Linvega" />

<meta property='og:title' content='A page of the digital garden' />
<meta property='og:image' content='https://wiki.xxiivv.com/media/services/rss.jpg' />

<title>XXIIVV &mdash; postscript</title></head><body>
<header><a href="home.html"><img alt="XXIIVV" src="../media/icon/logo.svg"></a></header>
<nav><ul><li><a href="assembly.html">assembly</a></li><li><a href="imperative.html">imperative</a></li><li><a href="concatenative.html" class="parent">concatenative</a></li><li><a href="rewriting.html">rewriting</a></li><li><a href="functional.html">functional</a></li><li><a href="neural_nets.html">neural nets</a></li><li><a href="graphical.html">graphical</a></li></ul><ul><li><a href="forth.html">forth</a></li><li><a href="postscript.html" class="self">postscript</a></li></ul><ul></ul></nav>
<main><figure><img alt="Postscript on Plan9" src="../media/diary/724.jpg"><figcaption>Postscript on Plan9<span class="right">14P07</span></figcaption></figure>
<h2>Postscript is a programming language that was designed to specify the layout of the printed page.</h2>

<p>The Postscript language uses a <a href='notation.html'>postfix</a> syntax similar to <a href='forth.html'>Forth</a>.</p>

<p>Guide written by Paul Bourke, last updated December 1998.<p>

<figure>
	<img src='../media/refs/vogue-postscript.jpg' width='300'/>
	<figcaption>Typical Postscript Programmer</figcaption>
</figure>

<h3>Introduction</h3>

<p>Postscript printers and postscript display
software use an interpreter to convert the page description into the
displayed graphics.</p>

<p>
The following information is designed as a first tutorial to the postscript
language. It will concentrate on how to use postscript to generate graphics
rather than explore it as a programming language.
By the end you should feel confident about writing simple
postscript programs for drawing graphics and text. Further information
and a complete specification of the language can be obtained from
<b>The Postscript Language Reference Manual</b> from Adobe Systems Inc,
published by Addison-Wesley, Reading, Massachuchusetts, 1985.
</p>

<p>
Why learn postscript, after all, many programs can generate it for you
and postscript print drivers can print to a file? Some reasons might
be:
</p>

<ul>
  <li>Having direct postscript output can often result in much more efficient
    postscript, postscript that prints faster than the more generic output
    from printer drivers.</li>
  <li>There are many cases where generating postscript directly can result
    in much better quality. For example when drawing many types of fractals
    where high resolution is necessary, being able to draw at the native
    high resolution of a postscript printer is desirable.</li>
  <li>It isn't uncommon for commercial packages to make errors with their
    postscript output. Being able to look at the postscript and make some
    sense of what is going on can sometimes give insight on how to fix
    the problem.</li>
</ul>

<h3>The Basics</h3>

<p>
Postscript files are (generally) plain text files and as such they can
easily be generated by hand or as the output of user written programs.
As with most programming languages, postscript files (programs) are
intended to be, at least partially, human-readable. As such, they are
generally free format, that is, the text can be split across lines and
indented to highlight the logical structure.<br>
Comments can be inserted anywhere within a postscript file with the percent (%)
symbol, the comment applies from the % until the end of the line.
<br>
While not part of the postscript specification the first line of a
postscript file often starts as %!. This is so that spoolers and other
printing software detect that the file is to interpreted as postscript
instead of a plain text file. The inline example below will not include this
but the postscript files linked from this page will include it since they
are design for direct printing.<br>
The first postscript command to learn is <b>showpage</b>, it forces the
printer to print a page with whatever is currently drawn on it. The examples
given below print on single pages and therefore there is a showpage at the end
of the file in each example, see the comments later regarding EPS.
</p>

<h3>A Path</h3>

<p>
A path is a collection of, possibly disconnected, lines and areas describing
the image. A path is itself not drawn, after it is specified it can be
stroked (lines) or filled (areas) making the appropriate marks on the page.
There is a special type of path called the clipping path, this is a path
within which future drawing is constrained. By default the clipping path is
a rectangle that matches the border of the paper, it will not be changed
during this tutorial.
</p>

<h3>The Stack</h3>

<p>
Postscript uses a stack, otherwise known as a LIFO (Last In First Out)
stack to store programs and data. A postscript interpreter places the
postscript program on the stack and executes it, instructions that
require data will read that data from the stack. For example, there is
an operator in postscript for multiplying two numbers, <b>mul</b>. it
requires two arguments, namely the two numbers that are to be multiplied
together. In postscript this might be specified as
</p>

<pre>
   10 20 mul
</pre>

<p>
The interpreter would place 10 and then 20 onto the stack. The operator
<b>mul</b> would remove 20 and then 10 from the stack,
multiply them together and leave the result, 200, on the stack.</p>

<h3>Coordinate system</h3>

<p>
Postscript uses a coordinate system that is device independent, that is,
it doesn't rely on the resolution, paper size, etc of the final output
device. The initial coordinate system has the x axis to the right and y axis
upwards, the origin is located at the bottom left hand corner of the page.
The units are of "points" which are 1/72 of an inch long. In other words,
if we draw a line from postscript coordinate (72,72) to (144,72) we will
have a line starting one inch in from the left and right of the page,
the line will be horizontal and be one inch long.
</p>

<p>
The coordinate system can be changed, that is, scaled, rotated, and translated.
This is often done to form a more convenient system for the particular
drawing being created.
</p>

<h3>Basic Drawing Commands</h3>

<p>
Time to draw something. The following consists of a number of operators
and data, some operators like <b>newpath</b> don't need arguments, others
like <b>lineto</b> take two arguments from the stack. All the examples
in this text are shown as postscript on the left with the resulting
image on the right. The text on the left also acts as a link to a printable
form of the postscript file.
</p>

<pre>
newpath
100 200 moveto
200 250 lineto
100 300 lineto
2 setlinewidth
stroke
</pre>

<p>
There are also a relative moveto and lineto commands, namely, <b>rmoveto</b>
and <b>rlineto</b>.
</p>

<p>
In this next example a filled object will be drawn in a particular
shade, both for the outline and the interior. Shades range from 0 (black)
to 1 (white). Note the <b>closepath</b> that joins the first vertex of
the path with the last.
</p>

<pre>
newpath
100 200 moveto
200 250 lineto
100 300 lineto
closepath
gsave
0.5 setgray
fill
grestore
4 setlinewidth
0.75 setgray
stroke
</pre>

<p>
The drawing commands such as <b>stroke</b> and <b>fill</b> destroy the
current path, the way around this is to use <b>gsave</b> that saves the
current path so that it can be reinstated with <b>grestore</b>.
</p>

<h3>Text</h3>

<p>
Text is perhaps the most sophisticated and powerful aspect of postscript,
as such only a fraction of its capabilities will be discussed here.
One of the nice things is that the way characters are placed on the
page is no different to any other graphic. The interpreter creates a
path for the character and it is then either stroked or filled as
per usual.
</p>

<pre>
/Times-Roman findfont
12 scalefont
setfont
newpath
100 200 moveto
(Example 3) show
</pre>

<p>
As might be expected the position (100,200) above specifies the position
of the bottom left corner of the text string. The first three lines in the
above example are housekeeping that needs to be done the first time a
font is used. By default the font size is 1 point, scalefont then sets
the font size in units of points (1/72 inch). The brackets around the words
"Example 3" indicate that it is a string.
</p>

<p>
A slightly modified version of the above uses <b>charpath</b> to treat
the characters in the string as a path which can be stroked or filled.
</p>

<pre>
/Times-Roman findfont
32 scalefont
setfont
100 200 translate
45 rotate
2 1 scale
newpath
0 0 moveto
(Example 4) true charpath
0.5 setlinewidth
0.4 setgray
stroke
</pre>

<p>
You should make sure you understand the order of the operators above
and the resulting orientation and scale of the text, procedurally it
draws the text, <b>scale</b> the y axis by a factor of 2, <b>rotate</b> counter
clockwise about the origin, finally <b>translate</b> the coordinate system
to (100,200).
</p>

<h3>Colour</h3>

<p>
For those with colour LaserWriters the main instruction of interest that
replaces the <b>setgray</b> is previous examples is <b>setrgbcolor</b>.
It requires 3 arguments, the red-green-blue components of the colour
each varying from 0 to 1.
</p>

<pre>
newpath
100 100 moveto
0 100 rlineto
100 0 rlineto
0 -100 rlineto
-100 0 rlineto
closepath
gsave
0.5 1 0.5 setrgbcolor
fill
grestore
1 0 0 setrgbcolor
4 setlinewidth
stroke
</pre>

<h3>Programming</h3>

<p>
As mentioned in the introduction postscript is a programming language.
The extend of this language will not be covered here except to show
some examples of procedures that can be useful to simplify postscript
generation and make postscript files smaller.
<br>
Lets assume one needed to draw lots of squares with no border but
filled with a particular colour. One could create the path repeatedly
for each one, alternatively one could define something like the following.
</p>

<pre>
/csquare {
   newpath
   0 0 moveto
   0 1 rlineto
   1 0 rlineto
   0 -1 rlineto
   closepath
   setrgbcolor
   fill
} def

20 20 scale

5 5 translate
1 0 0 csquare

1 0 translate
0 1 0 csquare

1 0 translate
0 0 1 csquare
</pre>

<p>
This procedure
draws three coloured squares next to each other, each 20/72 inches
square, note the <b>scale</b> of 20 on the coordinate system. The procedure
draws a unit square and it expects the RGB colour to be on the stack.
This could be used as a method (albeit inefficient) of drawing a
bitmap image.
</p>

<p>
Even if one is simply drawing lots of lines on the page, in order to reduce
the file size it is common to define a procedure as shown below. It just
defines a single character "l" to draw a line segment, one can then use
commands like 100 200 200 200 l" to draw a line segment from (100,200) to
(200,200).
</p>

<h3>koch.ps</h3>

<pre>
%!PS-Adobe-3.0 EPSF-3.0

/koch {
  dup depth le {     % s < depth
    1 add exch % s => s+1
    3 div exch % t => t/3
    % t/3 s+1 60 t/3 s+1 240 t/3 s+1 60 t/3 s+1
    60 3 copy 180 add 3 copy 180 sub 3 copy pop
    koch rotate koch rotate koch rotate koch
  }
  { pop 0 rlineto }         % draw
  ifelse
} def

4.0 4.0 scale
/depth 5 def
0.1 setlinewidth
newpath
 20 100 moveto
100   1 koch stroke
showpage
</pre><ul>
	<li><a href='https://www.math.ubc.ca/~cass/graphics/manual/' target='_blank'>tutorials</a></li>
</ul>

<ul></ul><p class="incoming"><b>incoming</b> <a href="dotgrid.html">dotgrid</a> </p></main>
<footer>
	<a href="ethics.html"><img src="../media/icon/3arrows.svg" alt="NoNazis!"/></a>
	<a href="https://webring.xxiivv.com/" target="_blank"><img src="../media/icon/webring.svg" alt="Webring"/></a>
	<a href="https://merveilles.town/@neauoire" rel="me" target="_blank"><img src="../media/icon/merveilles.svg" alt="Merveilles"/></a>
	<a href="uxn.html"><img src="../media/icon/uxn.svg" alt="UxnPowered"/></a> 
	<span><a href="devine_lu_linvega.html">Devine Lu Linvega</a> &copy; 2008-2025</span>
	<div class="right"><a href="about.html#license">BY-NC-SA 4.0</a>
		<a href="https://creativecommons.org/licenses/by-nc-sa/4.0" target="_blank"><img src="../media/icon/cc.svg" alt="CreativeCommons"/></a>
	</div>
	<hr/>
</footer>
</body></html>