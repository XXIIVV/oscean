<h2>Using stack effect definitions in Uxntal.</h2>

<p>The Uxntal notation follows that of the <a href='forth.html'>Forth</a>
programming language, where each item on the left of the <kbd>--</kbd> spacer
is the state of the stack before, and to the right, the state of the stack
after:</p>

<pre>
@routine ( a b -- a b c )
	ADDk
	JMP2r
</pre>

<p>By default, single items are a byte long, and shorts are indicated with a
<kbd>*</kbd> suffix, the order in which they appear is the order of the stack
with the top item to the right:</p>

<pre>
@routine ( a b* -- b* a )
	ROT
	JMP2r
</pre>

<p>If a routine is a <a href='uxntal_devices.html'>vector</a>, it uses the arrow
notation.</p>

<pre>
@on-event ( -> )
	BRK
</pre>

<p>If a specific item on the stack needs to be explicit about it being a pointer
that needs to be unquoted, the concatenative notation is written within curlies.</p>

<pre>
@routine ( {fn}* -- )
	JMP2
</pre>

<p>If a routine returns a -1 for failure, the value is within angulars.</p>

<pre>
@routine ( name* -- &lt;res&gt;* )
	JMP2
</pre>

<p>In some rare cases, an item is passed to a routine via the return stack, in
this case it is prefixed with the <kbd>`</kbd> character indicates items in the
return stack to its right. The return address is omitted from the stack effect
notation.</p>

<pre>
@routine ( a* `b* -- )
	POP2 POP2r
	JMP2r
</pre>

<h3>Extras</h3>
<ul>
	<li>Struct labels are capitalized.</li>
	<li>Source is indented with tabulators.</li>
	<li>Comments that should be on their own line begin with a ( | pipe ).</li>
	<li>Routines that consume all their arguments from the stack are &lt;wrapped&gt; inside angle brackets.</li>
	<li>Subroutines without an arity definition will be inlined</li>
	<li>Tokens inside square brackets will be formatted as blocks of binary data.</li>
	<li>The zero-page is indicated by |000, the one-page is indicated by |100.</li>
	<li>Nesting routines are indicated by &>loop.</li>
</ul>
<p>Further notation is available for <a href='uxntal_types.html'>program
verification</a>.</p>

<img src='../media/refs/newwave.png'/>

