<h2>Drifblim is a Uxntal assembler, written in Uxntal.</h2>

<img src="../media/refs/drifblim.png" alt="Drawing by Rekka Bellum"
style='float:right;width:180px'>


<p>The assembler is written in <a href='uxntal.html'>Uxntal</a> itself, and is
designed to help bootstrap the <a href='uxn.html'>Uxntal</a> ecosystem, it
expects the standard <a href='uxntal_notation.html'>Uxntal Notation</a>. Here 
are the limits of the implementation:</p>

<ul>
	<li>Limit of 48 bytes per token and scope.</li>
	<li>Maximum nesting depth of 255 for <a href='uxntal_lambdas.html'>lambdas</a>.</li>
	<li>Only one include per file, must be last token of file.</li>
</ul>

<article>
	<p><i>Drifblim is strong enough to lift Pokemon or people but has no control
over its flight. This causes it to drift with the wind and end up
anywhere.</i></p>
</article>

<h3 id='bootstrap'>Boostrapping</h3>

<p>Since the assembler is written in the language it is assembling, you have a few
choices:</p>

<ol>
	<li>Download a pre-assembled <a href='https://rabbits.srht.site/drifblim/drifblim.rom' target="_blank">drifblim.rom</a>.</li>
	<li>Assemble <a href='../etc/drifblim.tal.txt'>drifblim.tal</a> with <a href='https://git.sr.ht/~rabbits/uxn/tree/main/item/src/uxnasm.c' target="_blank">uxnasm.c</a>.</li>
	<li>Bootstrap from a <a href='../etc/drifblim.rom.txt'>drifblim.rom</a> hexdump.</li>
</ol>

<p>If you are unable to assemble your own copy of drifblim, lost its source file,
or simply want to make sure that the assembler is unaltered, you will need the
hexadecimal data of <a href='../etc/drifblim.rom.txt'>drifblim.rom</a>. Here
are some inspectable tools to help with the bootstrapping process on
non-unix systems:</p>

<h4>Step 1: xh.rom</h4>

<p>If for some reason you do not have access to the unix <kbd>xxd</kbd> command,
you can convert hexadecimal dump to a rom with the <a
href='../etc/xh.tal.txt'>xh program</a>, which reads a console stream of
text and output the actual bytes through the console. This step expects a way
to manually create a binary file, but not having a convenient way of creating
large files manually.</p>

<pre style='margin-bottom:1px'>
a001 0a80 1037 e001 0100 8012 1680 3019
0680 0a0b 2000 0c80 2719 0680 100b 2000
0202 0041 dc4f 2000 0480 401f 001d 8018
1700</pre>
<pre>cat <a href='../etc/drifblim.rom.txt'>drifblim.rom.txt</a> | uxncli xh.rom > drifblim.rom</pre>

<h4>Step 2: cat.rom</h4>
<p>If for some reason you do not have access to the unix <kbd>cat</kbd> program,
you can read files and output their content through the console with the <a
href='../etc/cat.tal.txt'>cat program</a>, which reads a file and outputs the
content via the console.</p>

<pre style='margin-bottom:1px'>
a001 0780 1037 0080 1216 0680 1f0a 2000
1502 6000 1aa0 000f 13a0 0317 1608 2000
04a0 800f 1700 a000 0081 80fb 1331 00a0
0000 80a8 37a0 0001 80aa 37a0 014b 80ac
b780 a316 2000 0302 226c a000 1817 40ff
ef</pre>
<pre>uxncli cat.rom <a href='../etc/drifblim.rom.txt'>drifblim.rom.txt</a> | uxncli xh.rom > drifblim.rom</pre>

<h4>Step 3: drifblim.rom</h4>

<p>Congratulation! You have assembled your own assembler from a hex dump.
Now, use it to create a new one from the 
<a href='../etc/drifblim.tal.txt'>source code</a> and compare the hex
dump.</p>

<pre style='margin-bottom:1px'>
a001 0780 1037 0080 1216 0680 1f0a 2000
1502 6000 1aa0 000f 13a0 0317 1608 2000
04a0 800f 1700 a000 0081 80fb 1331 00a0
0000 80a8 37a0 0001 80aa 37a0 014b 80ac
b780 a316 2000 0302 226c a000 1817 40ff
ef</pre>
<pre>
uxncli drifblim.rom <a href='../etc/drifblim.tal.txt'>drifblim.tal.txt</a> drifblim2.rom
</pre>

<p>To validate your own assembler, see the <a
href='https://git.sr.ht/~rabbits/drifblim/tree/main/item/tests.sh'
target='_blank'>tests</a>.</p>

<ul>
	<li><a href='https://git.sr.ht/~rabbits/drifblim' target='_blank'>View Source</a></li>
	<li><a href='https://rabbits.srht.site/drifblim/drifblim.rom' target='_blank'>Download rom</a></li>
</ul>

<img src="../media/refs/wyoa.png" style='width:300px'/>

<style>
	iframe { height:400px; background:#eee; border:2px solid black; border-radius:3px }
</style>
